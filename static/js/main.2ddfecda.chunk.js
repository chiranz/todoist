(this["webpackJsonptodoist-client"]=this["webpackJsonptodoist-client"]||[]).push([[0],{134:function(e,a,t){e.exports=t.p+"static/media/todoist.72927dc1.png"},144:function(e,a,t){e.exports=t.p+"static/media/landing.0a0b9c0a.png"},162:function(e,a,t){e.exports=t(194)},170:function(e,a,t){},194:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(10),i=t.n(o),c=t(16),l=t(21),s=t(50),m=(t(170),t(32)),u=t.n(m),d=t(69),p=t(230),h=t(233),b=t(235),E=t(198),g=t(236),f=t(138),v=t.n(f),S=t(140),w=t.n(S),y=t(245),T=t(147),x=t(232),O=t(234),j=t(237),C=t(35),k=t.n(C),N=t(71),A=function(e){var a="Bearer ".concat(e);localStorage.setItem("FirebaseIdToken",a),u.a.defaults.headers.common.Authorization=a},_=function(){return function(e){localStorage.removeItem("FirebaseIdToken"),delete u.a.defaults.headers.common.Authorization,e({type:"SET_UNAUTHENTICATED"})}},I=t(134),P=t.n(I),D=Object(p.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1,textDecoration:"none",fontWeight:"bold"},brand:{height:"2rem"}}}));function W(){var e=Object(x.a)("(max-width:756px)"),a=Object(c.c)((function(e){return e.user.authenticated})),t=D(),n=Object(c.b)(),o=r.a.useState(null),i=Object(d.a)(o,2),s=i[0],m=i[1],u=Boolean(s),p=function(){m(null)};return r.a.createElement("div",{className:t.root},r.a.createElement(h.a,{color:"transparent",position:"static"},r.a.createElement(O.a,{maxWidth:"lg"},r.a.createElement(b.a,null,e&&r.a.createElement(g.a,{edge:"start",className:t.menuButton,color:"inherit","aria-label":"menu"},r.a.createElement(v.a,null)),r.a.createElement(E.a,{variant:"h5",className:t.title,component:l.b,to:a?"/dashboard":"/",color:"primary"},r.a.createElement("img",{className:t.brand,src:P.a,alt:"logo"})),a?r.a.createElement("div",null,r.a.createElement(g.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){m(e.currentTarget)},color:"inherit"},r.a.createElement(w.a,null)),r.a.createElement(T.a,{id:"menu-appbar",anchorEl:s,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:u,onClose:p},r.a.createElement(y.a,{onClick:p},"Profile"),r.a.createElement(y.a,{onClick:function(){return n(_())}},"Logout"))):r.a.createElement("div",null,r.a.createElement(j.a,{component:l.b,to:"/login",color:"inherit"},"Login"),r.a.createElement(j.a,{component:l.b,to:"/signup",color:"primary"},"Signup"))))))}var U=t(101),B=t(246),q=t(238),F=t(243),z=t(241),R=t(240),G=t(239),H=t(100),V=t.n(H),J=t(39),L=J.a().shape({email:J.b().email("Must be a valid email").max(255,"Should be less than 255 characters").required("Email is required!"),password:J.b().min(6,"Shoul be min 6 characters").max(255,"Can't be more than 255 chars").required("Password is required!")}),M=J.a().shape({email:J.b().email("Must be a valid email").max(255,"Should be less than 255 characters").required("Email is required!"),username:J.b().min(2,"Should be at least 2 characters").max(255,"Should be less than 255 characters").required("Username is required!"),password:J.b().min(6,"Should be min 6 characters").max(255,"Can't be more than 255 chars").required("Password is required!"),confirmPassword:J.b().min(6,"Should be min 6 characters").max(255,"Can't be more than 255 chars").required("Confirm your password!").test("match-password","Passwords must be same.",(function(e){return e===this.parent.password}))}),X=Object(p.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.success.dark},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2),position:"relative"},progress:{position:"absolute"}}}));function K(e){var a=e.history,t=Object(n.useState)(""),o=Object(d.a)(t,2),i=o[0],s=o[1],m=X(),p=Object(c.b)();return r.a.createElement(O.a,{component:"main",maxWidth:"xs"},r.a.createElement(q.a,null),r.a.createElement("div",{className:m.paper},r.a.createElement(B.a,{className:m.avatar},r.a.createElement(V.a,null)),r.a.createElement(E.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement(E.a,{variant:"body2",color:"error"},i&&i),r.a.createElement(U.a,{validationSchema:L,initialValues:{email:"",password:""},onSubmit:function(e,t){var n=t.resetForm,r=t.setSubmitting,o=t.setErrors;p(function(e,a,t){var n=t.resetForm,r=t.setSubmitting,o=t.setErrors,i=t.setGlobalError;return(function(){var t=Object(N.a)(k.a.mark((function t(c){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.post("/login",e).then((function(e){c({type:"SET_AUTHENTICATED",payload:e.data}),A(e.data.token),n(),r(!1),a.push("/dashboard")})).catch((function(e){var a=e.response.data;a.global?i(a.global):o(a),r(!1)}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}(e,a,{resetForm:n,setSubmitting:r,setErrors:o,setGlobalError:s}))}},(function(e){var a=e.values,t=e.errors,n=e.touched,o=e.handleChange,i=e.handleBlur,c=e.handleSubmit,s=e.isSubmitting;return(r.a.createElement("form",{onSubmit:c,className:m.form,noValidate:!0},r.a.createElement(F.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",value:a.email,onChange:o,onBlur:i,error:!(!t.email||!n.email),helperText:t.email}),r.a.createElement(F.a,{variant:"outlined",margin:"normal",fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:a.password,onChange:o,onBlur:i,error:!(!t.password||!n.password),helperText:t.password}),r.a.createElement(j.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:m.submit,disabled:s},"Sign In",s?r.a.createElement(G.a,{size:30,className:m.progress}):""),r.a.createElement(R.a,{container:!0},r.a.createElement(R.a,{item:!0},r.a.createElement(z.a,{component:l.b,to:"/signup",variant:"body2",color:"secondary"},"Don't have an account? Sign Up")))))}))))}var Y=Object(p.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.success.dark},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2),position:"relative"},progress:{position:"absolute"}}}));function Q(e){var a=e.history,t=Object(n.useState)(""),o=Object(d.a)(t,2),i=o[0],s=o[1],m=Object(c.b)(),p=Y();return r.a.createElement(O.a,{component:"main",maxWidth:"xs"},r.a.createElement(q.a,null),r.a.createElement("div",{className:p.paper},r.a.createElement(B.a,{className:p.avatar},r.a.createElement(V.a,null)),r.a.createElement(E.a,{component:"h1",variant:"h5"},"Sign up"),r.a.createElement(E.a,{variant:"body2",color:"error"},i&&i),r.a.createElement(U.a,{validationSchema:M,initialValues:{email:"",password:"",username:"",confirmPassword:""},onSubmit:function(e,t){var n=t.resetForm,r=t.setSubmitting,o=t.setErrors;m(function(e,a,t){var n=t.resetForm,r=t.setSubmitting,o=t.setErrors,i=t.setGlobalError;return(function(){var t=Object(N.a)(k.a.mark((function t(c){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.post("/signup",e).then((function(e){c({type:"SET_AUTHENTICATED",payload:e.data}),A(e.data.token),n(),r(!1),a.push("/dashboard")})).catch((function(e){var a=e.response.data;a.global?i(a.global):o(a),r(!1)}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}(e,a,{resetForm:n,setSubmitting:r,setErrors:o,setGlobalError:s}))}},(function(e){var a=e.values,t=e.errors,n=e.touched,o=e.handleChange,i=e.handleBlur,c=e.handleSubmit,s=e.isSubmitting;return(r.a.createElement("form",{onSubmit:c,className:p.form,noValidate:!0},r.a.createElement(F.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",value:a.email,onChange:o,onBlur:i,error:!(!t.email||!n.email),helperText:t.email}),r.a.createElement(F.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"username",label:"Username",name:"username",value:a.username,onChange:o,onBlur:i,error:!(!t.username||!n.username),helperText:t.username}),r.a.createElement(F.a,{variant:"outlined",margin:"normal",fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",value:a.password,onChange:o,onBlur:i,error:!(!t.password||!n.password),helperText:t.password}),r.a.createElement(F.a,{variant:"outlined",margin:"normal",fullWidth:!0,name:"confirmPassword",label:"Confirm Password",type:"password",id:"confirmPassword",value:a.confirmPassword,onChange:o,onBlur:i,error:!(!t.confirmPassword||!n.confirmPassword),helperText:t.confirmPassword}),r.a.createElement(j.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:p.submit,disabled:s},"Sign Up",s?r.a.createElement(G.a,{size:30,className:p.progress}):""),r.a.createElement(R.a,{container:!0},r.a.createElement(R.a,{item:!0},r.a.createElement(z.a,{color:"secondary",component:l.b,to:"/login",variant:"body2"},"Already have an account? Sign In")))))}))))}var Z=t(244);function $(){return r.a.createElement(O.a,{component:Z.a,mt:8,mb:4,maxWidth:"xs"},r.a.createElement(E.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(z.a,{color:"inherit",href:"https://chiranjibipoudyal.com/"},"Chiranjibi Poudyal")," ",(new Date).getFullYear(),"."))}var ee=t(144),ae=t.n(ee),te=Object(p.a)((function(){return{backgroundImage:{display:"flex",alignItems:"center",width:"100%",height:"100vh",textAlign:"center",flexDirection:"column",background:"url(".concat(ae.a,")"),backgroundRepeat:"no-repeat",backgroundSize:"contain",backgroundPositionY:"16rem"},centered:{display:"flex",width:"100%",flexDirection:"column",justifyContent:"center",textAlign:"center"},callToAction:{fontWeight:"bold",borderRadius:".3rem"},heading:{marginTop:"3rem",fontWeight:"bold"},bold:{fontWeight:"bold"}}}));function ne(){var e=te();return(r.a.createElement(O.a,{maxWidth:"lg"},r.a.createElement("div",{className:e.backgroundImage},r.a.createElement(E.a,{className:e.heading,variant:"h1",gutterBottom:!0},"Organize it all ",r.a.createElement("br",null)," with Todoist"),r.a.createElement(j.a,{className:e.callToAction,color:"primary",variant:"contained",component:l.b,to:"/signup"},r.a.createElement(E.a,{className:e.bold,variant:"h5"},"Get Started")))))}var re=t(148),oe=t(247),ie=t(242),ce=t(108),le=t(109),se=Object(p.a)((function(e){return{centered:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"60vh"}}}));function me(){var e=Object(c.c)((function(e){return e.user})).authenticated,a=Object(c.b)();Object(n.useEffect)((function(){e&&(a(function(){var e=Object(N.a)(k.a.mark((function e(a){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.get("/projects").then((function(e){a({type:"SET_PROJECTS",payload:e.data})})).catch((function(e){console.log(e.response)}));case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()),a(function(){var e=Object(N.a)(k.a.mark((function e(a){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.get("/tasks").then((function(e){console.log(u.a.defaults.headers),a({type:"SET_TASKS",payload:e.data})})).catch((function(e){console.log(e.response)}));case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()))}),[a,e]);var t=se();return(r.a.createElement(O.a,{className:t.centered,maxWidth:"lg"},"Dashboard Page"))}var ue=t(103);function de(e){var a=e.component,t=Object(ue.a)(e,["component"]),n=Object(c.c)((function(e){return e.user.authenticated}));return r.a.createElement(s.b,Object.assign({},t,{render:function(e){return n?r.a.createElement(a,e):r.a.createElement(s.a,{to:"/login"})}}))}var pe=t(145),he=t.n(pe);function be(e){var a=e.component,t=Object(ue.a)(e,["component"]),n=Object(c.c)((function(e){return e.user.authenticated}));return r.a.createElement(s.b,Object.assign({},t,{render:function(e){return n?r.a.createElement(s.a,{to:"/dashboard"}):r.a.createElement(a,e)}}))}var Ee=Object(re.a)({palette:{primary:{main:ce.a[700]},secondary:{main:le.a[500]}}});Ee=Object(oe.a)(Ee);var ge=function(){var e=Object(c.b)();return Object(n.useEffect)((function(){var a=localStorage.FirebaseIdToken;a&&(1e3*he()(a).exp<Date.now()?e(_()):(u.a.defaults.headers.common.Authorization=a,e({type:"SET_AUTHENTICATED",payload:{token:a}})))}),[e]),r.a.createElement(l.a,null,r.a.createElement(ie.a,{theme:Ee},r.a.createElement(W,null),r.a.createElement(s.d,null,r.a.createElement(be,{exact:!0,path:"/",component:ne}),r.a.createElement(de,{exact:!0,path:"/dashboard",component:me}),r.a.createElement(be,{exact:!0,path:"/login",component:K}),r.a.createElement(be,{exact:!0,path:"/signup",component:Q})),r.a.createElement($,null)))},fe=t(46),ve=t(146),Se=t(51),we={token:null,authenticated:!1,credentials:null},ye={projects:[],project:{},tasks:[],task:{}},Te=Object(fe.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_AUTHENTICATED":return Object(Se.a)({},e,{token:a.payload.token,authenticated:!0});case"SET_USER":return Object(Se.a)({},e,{credentials:a.payload});case"SET_UNAUTHENTICATED":return we;default:return e}},data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_TASKS":return Object(Se.a)({},e,{tasks:a.payload});case"SET_TASK":return Object(Se.a)({},e,{task:a.payload});case"SET_PROJECTS":return Object(Se.a)({},e,{projects:a.payload});case"SET_PROJECT":return Object(Se.a)({},e,{project:a.payload});default:return e}}}),xe=[ve.a],Oe=window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__(),je=Object(fe.e)(Te,Object(fe.d)(fe.a.apply(void 0,xe),Oe));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(c.a,{store:je},r.a.createElement(ge,null))),document.getElementById("root"))}},[[162,1,2]]]);
//# sourceMappingURL=main.2ddfecda.chunk.js.map